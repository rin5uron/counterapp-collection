# プロジェクトフェーズ計画

## 📱 プロジェクト概要
JavaScriptの学習を目的とした、インタラクティブなメッセージボタンアプリ

---

## 🎯 フェーズ1
- 基本機能の確立 ✅
- [📄 完成URL（Phase1）](https://love-counter-git-phase1-rs-projects-9c94598c.vercel.app/)

### 完成した機能
- ✅ ボタンクリックでランダムメッセージ表示
- ✅ カウント機能（好き度%表示）
- ✅ 22回ごとの特別メッセージ表示
- ✅ 特別メッセージ表示時のボタン一時停止（2.5秒）
- ✅ キラキラアニメーション効果
- ✅ スマホ対応（レスポンシブデザイン）
- ✅ ベージュ系のパステルカラーデザイン
- ✅ 50個のメッセージバリエーション

### 技術的に学んだこと
- `innerHTML`でHTMLタグを解釈して改行を実現
- `disabled`プロパティでボタンの無効化/有効化
- `Math.random()`と配列を使ったランダム表示
- CSSアニメーション（`@keyframes`）
- メディアクエリでのスマホ対応
- `setTimeout`での非同期処理

### 使用技術
- HTML5
- CSS3（グラデーション、アニメーション、メディアクエリ）
- JavaScript（ES6）
- Git/GitHub（ブランチ管理）

### 完了ブランチ
- `phase1` - フェーズ1完了時のブランチ

---

## 🎨 フェーズ2 - デザイン改善とApple風UI ✅

**[📄 完成URL（Phase2）](https://love-counter-git-phase2-rs-projects-9c94598c.vercel.app/)**

### 目標
Apple-likeな洗練されたデザインと、大人可愛い印象の実現

### 完成した機能
- ✅ SVGデザインでボタンをリンゴマークに変更
- ✅ 左右対称なりんごSVGの実装
- ✅ デザインコンセプトファイル作成（DESIGN.md）
- ✅ カラーチャートの整理とCSS変数化
- ✅ Apple風の落ち着いた配色（彩度を抑えた赤、温かみのある白）
- ✅ メッセージに視線を向けるレイアウト調整
- ✅ フォントウェイト調整（視覚的階層の最適化）
- ✅ 控えめなシャドウとアニメーション（Apple風の洗練）
- ✅ モバイル・PC両対応の余白調整
- ✅ アクセシビリティ向上（テキストコントラスト強化）

### 技術的に学んだこと

**詳しい学習内容は → [学習ノート](./love-counter/learning-notes.md) を参照**

- **SVGパスの左右対称ロジック**
  - 中心軸（x=50）を基準にした対称性の計算
  - `右側x = 100 - 左側x` の公式
  - 制御点のy座標も揃える必要がある

- **SVG曲線の滑らかさ調整**
  - 制御点の位置でカーブの形が変わる
  - 制御点を外側に移動→カーブが緩やかに
  - 制御点を下に移動→下に膨らむ

- **CSS変数によるカラー管理**
  - 一元管理で保守性向上
  - デザインの一貫性確保
  - 変更が容易

- **Apple風デザインの原則**
  - 控えめなシャドウ（`0 2px 8px`程度）
  - 繊細なアニメーション（`translateY(-2px)`程度）
  - 余白を活かしたレイアウト
  - 彩度を抑えた配色

### デザイン改善の詳細

#### カラーパレット
```css
/* りんごの色 */
--apple-red: #D46A6A;       /* 落ち着いた赤 */
--apple-red-hover: #C15D5D; /* ホバー時 */
--white-soft: #FFF5F0;      /* 温かみのある白 */
```

#### レイアウト改善
- 上部の余白を削減してメッセージに視線を集中
- カードの上部padding: 32px → 24px
- メッセージのフォントサイズ: 17px → 18px
- メッセージのフォントウェイト: 500 → 600

#### アニメーション改善
- ホバー時の移動: -5px → -2px（より繊細に）
- キラキラ効果: scale(1.02) → scale(1.01)（控えめに）
- シャドウ: 0 4px 12px → 0 2px 8px（Apple風に）

### 使用技術
- SVG（ベクター画像、path要素）
- CSS変数（カスタムプロパティ）
- CSS3（三次ベジェ曲線の理解）
- レスポンシブデザイン（flexbox、メディアクエリ）
- デザインシステム（DESIGN.md）

### 完了ブランチ
- `phase2` - フェーズ2完了時のブランチ

### 次の課題・改善点
- [ ] **りんごボタンのインパクト強化**
  - りんごのサイズを大きくして存在感を出す
  - YESテキストをもっと主張させる（サイズ・ウェイト・配置の最適化）
  - フォントウェイトの研究と実験（Apple製品の事例研究）
  - ボタン全体のバランス調整
  - スマホでボタン押すとき上より、もう少し真ん中にする
  - りんごに影つけてボタン感出す
  - 全体的にインパクト足りない

---

## 🔗 フェーズ3 - LINE連携機能 ✅

**[📄 完成URL（Phase3）](https://love-counter-git-phase3-rs-projects-9c94598c.vercel.app/)**

### 目標
LIFFとWebhookを使ったLINE連携の実装

### 完成した機能
- ✅ LIFF（LINE Front-end Framework）実装
- ✅ ユーザーID自動取得（個別対応可能）
- ✅ 返信フォーム（22回目に表示）
- ✅ 画像送信機能（imgur API連携）
- ✅ テキスト+画像の同時送信
- ✅ Webhook自動応答
- ✅ キーワード応答（「ねえねえ」でURL送信）
- ✅ pushMessage方式でのメッセージ送信

### 技術構成
- **フロントエンド**: LIFF SDK, JavaScript（ES6）
- **バックエンド**: Node.js / Vercel Serverless Functions
- **API**: LINE Messaging API, imgur API
- **ホスティング**: Vercel（自動デプロイ）

### 技術的に学んだこと
- LIFF SDKの実装とユーザー認証
- Webhookの仕組みとイベント処理
- Serverless Functionsの実装
- imgur APIでの画像アップロード
- Base64変換とデータURL
- 環境変数の管理（Vercel）
- pushMessage vs sendMessages の違い

### 完了ブランチ
- `phase3` - フェーズ3完了時のブランチ

### ⚠️ 発見された問題点

#### 問題1: チャットに友達が表示されない

**現象：**
- ユーザーがアプリから返信を送信しても、公式LINE管理画面にチャットが表示されない
- 誰がアプリを使っているか分からない

**原因：**
- 現在の実装は `pushMessage` 方式
- `pushMessage` はBotからユーザーへの一方的な送信
- **ユーザーが一度も直接メッセージ/スタンプを送っていない場合、トークルームが作成されない**

**暫定対策（フェーズ3）：**
1. ウェルカムメッセージで「最初に何か送ってね」と促す
2. スタンプ1個でも送ってもらえば、その後はアプリからの送信も管理画面で見られる

**根本的な解決策（フェーズ4で実装予定）：**
- `liff.sendMessages()` 方式に変更
- ユーザー本人から公式LINEにメッセージを送る形式
- 公式LINE管理画面でチャットが確実に表示される
- ただし、Webhookが発火するため、自動応答の制御が必要

**詳細**: [フェーズ4実装ガイド](./phase/phase4/liff-sendmessages-implementation.md)

### 満足度
★★★★☆ (4/5)

**良かった点：**
- LIFFの実装で個別対応が可能になった
- 画像送信機能が想像以上にスムーズ
- Vercel Serverless Functionsが使いやすかった

**課題：**
- pushMessage方式の制約（チャット非表示問題）
- フェーズ4で`liff.sendMessages()`に移行する必要がある

---


# Phase 1: 基本機能 - 詳細仕様

> **フェーズ1の目標**: ランダムメッセージ表示とカウント機能の実装

**[← 仕様書トップに戻る](../../spec.md)**

---

## 🎨 画面構成

### 1. カード全体
- 中央配置の白いカード（背景はベージュ）
- Apple風の落ち着いたデザイン
- スマホ対応（レスポンシブ）

### 2. トリガーテキスト
- 現在: `「私のこと好き？？」`（固定）
- 位置: カード最上部
- スタイル: 22px、font-weight: 500

### 3. メインボタン（りんごボタン）
- サイズ: 150x150px（PC） / 140x140px（スマホ） / 120x120px（小画面）
- 中央に「YES」テキスト
- ホバー時: 浮き上がり + 影強調
- クリック時: スケールダウン（0.95）

### 4. メッセージ表示エリア
- ランダムメッセージを表示
- フォントサイズ: 18px
- 最小高さ: 3.5em
- 改行対応（`<br>`タグ）

### 5. カウント表示
- 「私のこと好き度：X %」
- フォントサイズ: 13px
- 位置: カード下部

### 6. 特別メッセージ
- 22回ごとに表示
- 「✨このメッセージの答えを教えてね！✨」
- キラキラアニメーション
- 表示時はボタンを2.5秒間無効化

---

## 🔧 機能仕様

### 1. ランダムメッセージ表示

**トリガー**: メインボタンクリック

**処理フロー**:
1. カウント +1
2. `messages1`配列からランダムに1つ選択
3. メッセージエリアに表示（`innerHTML`で改行対応）
4. ボタンテキストを次のランダムなトリガーに更新

**データ構造**:
```javascript
// script.js
let messages1 = [
  "もう眠いから一緒に寝よ〜",
  "私に会いたい？？え〜〜",
  "今日食べたものの写真送って📷✨",
  // ... 全50個
];
```

**実装場所**: `script.js` - ボタンクリックイベント

---

### 2. カウント機能（好き度%）

**表示形式**: `私のこと好き度：X %`

**処理**:
- ボタンクリックごとに +1
- 上限なし（無限カウント）
- リセット機能なし（将来追加予定）

**実装場所**:
- カウント変数: `script.js` - `let count = 0;`
- 表示更新: `script.js` - `countDisplay.textContent`
- HTML: `index.html` - カウント表示エリア

---

### 3. 特別メッセージ機能

**トリガー条件**: `count % 22 === 0 && count !== 0`

**処理内容**:
1. 特別メッセージを表示
2. ボタンを無効化（opacity: 0.5）
3. 2.5秒後にボタンを再有効化
4. 特別メッセージを非表示

**実装場所**: `script.js` - ボタンクリック処理内

**アニメーション**:
- `@keyframes sparkle` でキラキラ効果
- 1.5秒ループ
- スケール変化 + 影の強調
- 実装場所: `index.html` - CSSアニメーション

---

### 4. ボタン一時停止機能

**実装方法**:
```javascript
mainButton.disabled = true;
mainButton.style.opacity = "0.5";
mainButton.style.cursor = "not-allowed";

setTimeout(function() {
  mainButton.disabled = false;
  mainButton.style.opacity = "1";
  mainButton.style.cursor = "pointer";
}, 2500);
```

**実装場所**: `script.js` - 特別メッセージ表示時

---

## 📊 データ構造

### メッセージ配列

```javascript
let messages1 = [
  "もう眠いから一緒に寝よ〜",
  "私に会いたい？？え〜〜",
  "今日食べたものの写真送って📷✨",
  "最近おすすめの映画かアニメ教えて〜",
  "声聞きたい！電話して？",
  "いま何してるの？",
  "いまお風呂入ってる、いそがしい",
  "すき♡",
  "りんご食べよ〜",
  "お散歩しに行こ〜",
  // ... 全50個
];
```

**配列サイズ**: 50個のメッセージ

---

## 🔍 主要な処理フロー

### ボタンクリック時の処理

```
1. ボタンクリックイベント発火
   ↓
2. カウント +1
   ↓
3. カウント表示を更新（「私のこと好き度：X %」）
   ↓
4. カウントが22の倍数か確認
   ├─ YES → 特別メッセージ表示
   │         ボタンを2.5秒間無効化
   │         キラキラアニメーション
   │         2.5秒後に特別メッセージ非表示 & ボタン再有効化
   │
   └─ NO  → ランダムメッセージ表示
             messages1配列からランダムに1つ選択
             メッセージエリアに表示
```

---

## 📚 学習ポイント

### JavaScript
- `Math.random()`と配列を使ったランダム表示
- `innerHTML`でHTMLタグを解釈して改行を実現
- `disabled`プロパティでボタンの無効化/有効化
- `setTimeout`での非同期処理
- イベントリスナー（`addEventListener`）

### CSS
- CSSアニメーション（`@keyframes`）
- メディアクエリでのスマホ対応
- CSS変数（`--variable-name`）
- グラデーション、シャドウ

### HTML
- セマンティックHTML（意味のあるタグ使用）
- 適切な構造化

---

## 🔗 関連ドキュメント

- [プロジェクトフェーズ計画](../../PROJECT_PHASES.md) - 全体的な開発計画
- [Phase 2 詳細仕様](../phase2/spec.md) - デザイン改善の詳細
- [学習メモ](../../learning-notes.md) - 技術的な学習記録

---

**[← 仕様書トップに戻る](../../spec.md)**
